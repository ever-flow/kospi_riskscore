# KOSPI 시장 리스크 분석 보고서
작성일: 2025년 8월 26일  
분석 대상 기간: 2003년 12월 1일 ~ 2025년 8월 19일  

## 1. 분석의 시작: 두 가지 질문
본 KOSPI 리스크 지수 개발 프로젝트는 다음과 같은 두 가지 근본적인 질문에서 시작되었습니다.

"주가 지수를 통해 경기를 예측할 수 있을까?": 주가는 실물 경기의 선행 지표로 알려져 있습니다. 만약 주가와는 낮은 상관관계를 가지면서도 시장의 위험도를 효과적으로 포착하는 지수를 만들 수 있다면, 이는 역으로 미래 경기를 가늠해 볼 수 있는 유용한 보조 지표가 될 수 있지 않을까 하는 가설입니다.

"지금 투자를 해야 할까, 말아야 할까?": 수많은 투자자들이 매일같이 마주하는 이 질문에 대해, 복잡한 설명 대신 0점에서 100점 사이의 표준화된 점수로 직관적인 답을 제공할 수는 없을까 하는 고민입니다. 명확하고 이해하기 쉬운 리스크 점수는 투자 대중의 합리적인 의사결정을 돕는 강력한 도구가 될 것이라 믿었습니다.

### 두 질문에 대한 답변
본 분석 결과를 통해 위 두 가지 질문에 대해 다음과 같은 잠정적 결론을 내릴 수 있습니다.

"주가 지수를 통해 경기를 예측할 수 있는가?"에 대하여: 가능성의 실마리를 찾았습니다. 본 리스크 지수는 미래 주가 수익률과 통계적으로 유의미한 음(-)의 상관관계(-0.2760)를 보였습니다. 이는 '주가가 경기를 선행한다'는 대전제 아래, 본 지수가 금융 시장의 불안정성을 감지하고 미래 기대 수익률의 하락을 예측함으로써 향후 실물 경기의 둔화 가능성을 한발 앞서 시사하는 선행 지표로 활용될 수 있는 잠재력을 보여줍니다.

"지금 투자를 해야 하는가?"에 대하여: 데이터 기반의 판단 근거를 제공합니다. 본 모델은 '감'이나 '주관'이 아닌, 수치화된 리스크 점수를 제공하여 해당 질문에 대한 합리적 판단을 돕습니다. 예를 들어, **현재 리스크 지수(64.51, '높음')**는 데이터 분석 결과 향후 기대수익률이 낮을 확률이 높다는 것을 의미하므로, 투자자에게 '현재는 공격적인 투자보다 보수적인 접근과 위험 관리가 더 중요할 수 있다'는 객관적인 시그널을 제공합니다. 이는 복잡한 질문에 대한 명확하고 직관적인 답변이 됩니다.

## 2. 보고서 개요 (Executive Summary)
본 보고서는 KOSPI 리스크 지수 산출 모델의 구조, 방법론, 그리고 최종 실행 결과를 심층적으로 분석합니다. 본 모델은 단기(3개월), 중기(6개월), 장기(12개월)의 미래 수익률을 예측하는 세 가지 모델을 동적으로 결합하는 '적응형 앙상블(Adaptive Ensemble)' 방식을 채택했습니다. 각 모델의 최근 성과에 따라 가중치를 차등 부여하여 시장 국면 변화에 대한 강건성을 극대화했습니다.

또한, 각 지표가 위험에 미치는 영향(방향성)을 고정하지 않고, 과거 데이터(2003-2018)를 기반으로 미래 수익률과의 관계를 학습하여 동적으로 방향성을 결정하는 논리를 도입했습니다. 자동화된 최적화 프레임워크(Optuna)를 통해, 금융 데이터의 극단적인 값(outlier)에 강건한 Huber 회귀 모델이 최적의 알고리즘으로 선정되었습니다.

분석 결과, 최종 앙상블 모델은 전체 기간에 대해 -0.2760이라는 통계적으로 유의미한 **정보 계수(Information Coefficient, IC)**를 기록했으며, 이는 모델의 예측 방향성이 올바름을 의미합니다. 로그의 마지막 시점인 2025년 8월 19일 기준 KOSPI 리스크 지수는 64.51로 '높음(High)' 수준으로 평가되었습니다. 이는 향후 시장의 변동성 확대 및 기대수익률 하락 가능성을 시사합니다.

## 3. 분석 방법론 (Methodology)
본 모델은 데이터 수집부터 최종 지수 산출까지 고도화된 4단계 파이프라인으로 구성됩니다.

### 3.1. 데이터 소스 및 특징 공학 (Data & Feature Engineering)
다양한 국·내외 금융 데이터를 종합적으로 활용하여 시장을 입체적으로 분석합니다.

데이터 소스: Yahoo Finance, FRED, pykrx를 통해 주가 지수, 원자재, 환율, 미국채 금리, 국내 증시 펀더멘털 및 수급 데이터를 일별로 수집합니다.

특징 생성: 수집된 원천 데이터를 바탕으로 기술적 지표(모멘텀, 변동성), 매크로 지표(금리차, VIX), 수급 지표(투자자별 순매수) 등 시장의 다양한 측면을 포착하는 특징(Feature)들을 생성합니다.

데이터 스케일링: 각 지표의 단위와 분포가 다르므로, rolling_percentile (롤링 백분위) 기법을 적용해 0~100 사이의 상대적 위험도로 정규화합니다.

동적 방향성 결정 (Dynamic Directionality): 모든 지표의 방향성을 미리 규정하지 않습니다. 튜닝 기간(2003-2018) 데이터로 각 지표와 미래 수익률의 상관관계를 분석하여, 수익률과 양(+)의 관계를 보인 지표(예: 주가 모멘텀)는 위험도를 나타내도록 값을 역전(100 - score)시켜 모델의 유연성과 데이터 기반 해석을 강화했습니다.

### 3.2. 모델링: 적응형 앙상블 (Modeling: Adaptive Ensemble)
시장의 국면(regime) 변화에 효과적으로 대응하기 위해, 여러 예측 모델을 동적으로 결합하는 방식을 채택합니다.

핵심 가정: 리스크 지수는 미래 수익률과 음(-)의 관계를 가진다. (리스크가 높을수록 미래 기대수익률은 낮다)

앙상블 구성: 단일 예측 기간 대신, 단기(63일), 중기(126일), 장기(252일) 미래 수익률을 각각 예측하는 3개의 독립적인 리스크 모델을 구축합니다.

동적 가중치 학습: 각 모델은 롤링(rolling) 방식으로 과거 데이터(최적 결과: 504일)를 학습하여 시시각각 변하는 시장 패턴을 반영한 가중치를 업데이트합니다.

적응형 결합: 최종 리스크 지수는 3개 모델의 결과물을 단순 평균하지 않습니다. 과거 3년간의 예측 성과를 지속적으로 추적하여, 최근 성과가 가장 좋았던 모델에 가장 높은 가중치를 부여하고 성과가 부진했던 모델의 영향력은 줄이는 방식으로 최종 점수를 산출합니다.

### 3.3. 하이퍼파라미터 최적화 (Hyperparameter Optimization)
모델의 예측 성능을 극대화하고 과적합을 방지하기 위해 Optuna 프레임워크를 통한 베이지안 최적화를 수행합니다.

탐색 대상: 모델의 구조와 성능에 영향을 미치는 모든 핵심 파라미터(하이퍼파라미터)를 탐색합니다.

최적화 목표 함수: Minimize (Mean IC). 교차 검증 과정에서 계산된 **평균 정보 계수(IC)를 최소화(음수이므로 절댓값은 최대화)**하는 것을 목표로 설정하여, 모델의 순수한 예측력을 극대화하는 최적의 파라미터 조합을 찾습니다.

검증 전략: Purged K-Fold Cross-Validation: 금융 시계열 데이터의 시간적 종속성으로 인한 **미래 정보 누수(Lookahead Bias)**를 원천 차단하기 위해 Purged K-Fold CV를 사용합니다. 이는 훈련 데이터와 검증 데이터 사이에 시간적 공백(Embargo)을 두어 모델의 일반화 성능을 실제 투자 환경과 가장 유사한 조건에서 엄격하게 측정합니다.

## 4. 분석 결과 및 해석 (Results & Interpretation)
### 4.1. 최적 모델 및 파라미터 해설
총 30번의 자동화된 최적화 과정을 통해, 모델의 성능을 극대화하는 다음과 같은 파라미터 조합이 도출되었습니다. 각 파라미터의 역할과 의미는 다음과 같습니다.

| 파라미터       | 선택된 값    | 역할 및 상세 해설 |
|----------------|--------------|-------------------|
| model_type    | huber       | 어떤 알고리즘을 사용하는가? <br> 금융 데이터에 종종 나타나는 극단적인 값(outlier)의 영향을 덜 받는 Huber 회귀 모델이 선택되었습니다. 이는 예측의 안정성을 높이는 역할을 합니다. |
| future_days   | 126         | 최적화의 기준점은 무엇인가? <br> 튜닝 과정에서 중기(6개월) 예측 모델의 성능이 가장 안정적이어서, 전체 최적화 과정의 기준점으로 사용되었습니다. (최종 모델은 3, 6, 12개월 모델을 모두 결합) |
| roll_window   | 252 (약 1년) | 개별 지표를 어떻게 해석하는가? (문맥 파악 기간) <br> 특정 지표(예: RSI)의 현재 값이 '과열'인지 판단하기 위해, 과거 1년간의 데이터 흐름 속에서 상대적 위치를 파악합니다. 즉, 각 지표의 '문맥'을 이해하는 기간입니다. |
| correlation_window | 504 (약 2년) | 지표들의 조합을 어떻게 학습하는가? (패턴 학습 기간) <br> 여러 지표들의 조합이 미래 주가에 어떤 영향을 미쳤는지, 그 '인과관계 패턴'을 학습하는 기간입니다. 과거 2년간의 데이터를 통해 "VIX가 높고 외국인 순매도가 강할 때, 미래 수익률이 낮아졌다"와 같은 패턴을 학습합니다. |
| step          | 5 (매주)    | 얼마나 자주 모델을 갱신하는가? <br> 시장 패턴을 학습하는 주기를 의미합니다. **매주(5 영업일)**마다 모델의 가중치를 재학습하여, 너무 잦은 변경으로 인한 노이즈는 줄이면서도 시장의 새로운 추세를 반영하도록 설정되었습니다. |
| alpha         | 17.65       | 모델을 얼마나 단순하게 유지하는가? (과적합 방지 강도) <br> 모델이 학습 데이터의 사소한 노이즈까지 과도하게 학습하는 '과적합'을 방지하는 규제의 강도입니다. 높은 값은 모델이 더 단순하고 일반화된 패턴에 집중하도록 강제하여, 새로운 데이터에 대한 예측력을 높입니다. |
| smooth_lambda | 0.9         | 학습된 가중치를 얼마나 안정적으로 유지하는가? (가중치 변화 관성) <br> 모델이 학습한 가중치가 급격하게 변하는 것을 방지하는 '스무딩' 강도입니다. 0.9의 높은 값은 기존 가중치를 대부분 유지하고 일부만 갱신하여, 모델의 예측이 안정적으로 유지되도록 돕습니다. |

### 4.2. 모델 성능 평가
성능 지표: 정보 계수 (Information Coefficient, IC)란?

정보 계수(IC)는 상관관계의 한 종류로, 본 모델에서는 구체적으로 **'스피어만 순위 상관 계수(Spearman Rank Correlation Coefficient)'**를 사용하여 계산됩니다. 일반적인 상관관계와 달리, 스피어만 상관 계수는 값의 크기 자체가 아닌 **순위(Ranking)**에 집중합니다.

즉, IC는 **"모델이 예측한 리스크의 순위(예: 가장 위험한 날, 두 번째 위험한 날...)"**와 **"실제 미래 수익률의 순위(예: 수익률이 가장 낮았던 날, 두 번째로 낮았던 날...)"**가 얼마나 일치하는지를 측정합니다. 이 지표는 -1에서 +1 사이의 값을 가지며, 다음과 같이 해석됩니다.

IC가 -1에 가까울수록: 완벽한 예측. 리스크가 높다고 예측한 순서대로 실제 미래 수익률이 낮게 나타남을 의미합니다. (본 모델의 이상적인 목표)

IC가 0에 가까울수록: 예측력 없음. 모델의 예측이 무작위와 같음을 의미합니다.

IC가 +1에 가까울수록: 예측이 반대로 맞음. 리스크가 높다고 예측할수록 오히려 수익률이 높았음을 의미합니다.

결론적으로 IC는 모델의 예측력을 나타내는 금융 분야의 핵심 지표이며, 이 보고서와 코드에서는 스피어만 상관계수와 동일한 의미로 사용됩니다. 일반적으로 금융 모델에서 IC의 절댓값이 0.05 이상이면 유의미한 예측력으로 평가됩니다.

전체 기간 성능 (2003-2025):

정보 계수 (IC): -0.2760

부트스트랩 평균 IC: -0.2765 (95% 신뢰구간: -0.3707 ~ -0.1768)

전체 기간에 걸쳐 리스크 지수가 높을수록 미래 수익률이 낮아지는 경향이 통계적으로 매우 유의미함을 확인했습니다.

기간별 성능 (Out-of-Sample):

OOS1 (2019-2022): IC -0.4096

팬데믹을 포함한 변동성이 큰 시기에 모델이 매우 효과적으로 시장 위험을 예측했음을 보여줍니다.

OOS2 (2023-현재): IC +0.0615

2023년 이후 구간에서는 모델의 예측력이 약화되었습니다. 이는 특정 거시 경제 변수나 시장 주도 섹터의 변화로 인해 기존에 학습된 위험 패턴이 잘 적용되지 않았을 가능성을 시사합니다. 다만, OOS2 기간(약 1.7년)은 OOS1 기간(4년)에 비해 분석 기간이 절반 이하로 짧아 통계적 안정성이 낮을 수 있다는 점을 감안해야 합니다. 따라서 이 구간의 성능 저하를 단정하기보다는, 향후 OOS 기간 구성을 재검토하거나 추가적인 탐색이 필요함을 시사하는 결과로 해석하는 것이 합리적입니다.

예측력 지속성 (IC Decay):

모델의 예측력은 단기(21일 IC: -0.136)보다 장기(252일 IC: -0.349)로 갈수록 강해지는 경향을 보였습니다. 이는 본 모델이 단기적인 주가 등락보다는 중장기적인 시장의 추세적 위험을 포착하는 데 더 강점이 있음을 의미합니다.

### 4.3. 리스크 지수 추이 및 현재 상태
과거 추이: 리스크 지수는 2008년 금융위기, 2020년 팬데믹 등 과거 주요 시장 하락 국면에서 급등하고, 상승장에서는 낮은 수준을 유지하는 경향을 보여 모델이 실제 시장 위험을 효과적으로 포착하고 있음을 뒷받침합니다.

현재 상태 (2025-08-19 기준):

최종 리스크 지수: 64.51 (높음, High)

이는 앙상블 모델을 구성하는 다수의 지표들이 종합적으로 향후 시장의 기대수익률 하락 가능성을 시사하고 있음을 의미합니다. 특히, 장기(12개월) 예측 모델에 가장 높은 가중치(79%)가 부여된 현재 상황은, 단기적 변동성보다는 중장기적 관점의 위험 요인들이 부각되고 있음을 나타냅니다.

### 4.4. 주요 특징 가중치 분석: 모델의 해석 가능성
본 모델은 회귀 모델을 기반으로 하므로 **모델의 해석 가능성(Interpretability)**이라는 장점을 가집니다. 시간에 따른 특징별 가중치 변화를 추적하면, 각 시기별로 어떤 요인이 리스크 판단에 중요하게 작용했는지 직접 확인할 수 있습니다. 예를 들어, 특정 시점에 VIX 지수나 외국인 수급 지표의 가중치가 크게 나타났다면, 당시 시장 리스크를 견인하는 핵심 동인이 무엇이었는지 명확히 파악할 수 있습니다. 이 동적 가중치 분석은 '왜 지금이 위험한가?'라는 질문에 대한 데이터 기반의 구체적인 단서를 제공합니다.

## 5. 결론 및 제언 (Conclusion & Recommendations)
결론: 본 KOSPI 리스크 지수 모델은 **'적응형 앙상블'**과 **'동적 특징 방향성 결정'**이라는 방법론을 통해 시장 변화에 대한 강건성과 데이터 기반의 유연성을 확보했습니다. 정교한 최적화 과정과 엄격한 검증을 통해 KOSPI 시장의 위험을 성공적으로 계량화하는 시스템을 구축했습니다.

의의: 본 모델은 투자자의 주관적 판단을 보완하고, 데이터에 기반한 체계적인 의사결정을 지원하는 효과적인 도구입니다. 특히, 최근 시장 국면(2023년 이후)에서 예측력이 약화된 현상을 명확히 식별함으로써, 어떤 모델도 모든 시장 상황에서 완벽할 수 없다는 점을 인지하고 지속적인 개선의 필요성을 제시했다는 점에서 중요한 시사점을 가집니다.

향후 개선 방향:

레짐 스위칭 모델(Regime-Switching Model) 도입: 2023년 이후 관찰된 성능 저하에 대응하기 위한 최우선 과제입니다. 상승기/하락기/횡보기를 구분하거나, 특정 거시 경제 변수(예: 금리 수준)에 따라 서로 다른 모델을 적용하는 접근을 통해 시장 국면별 예측력을 높일 수 있습니다.

대안 데이터(Alternative Data) 활용: 뉴스 기사나 보고서 텍스트를 분석하는 자연어 처리(NLP) 기반의 투자 심리 지표, 혹은 위성사진 데이터 등 비정형 데이터를 추가하여 모델의 예측력을 한 단계 더 높일 수 있습니다.

비선형 모델(Non-linear Model) 탐색: 현재의 선형 기반 모델(Huber)을 넘어, LightGBM, LSTM과 같은 비선형 모델을 탐색 후보군에 추가하여 특징들 간의 복잡하고 비선형적인 관계를 포착하는 방안을 연구할 필요가 있습니다.

리스크 지수의 경기 선행 지표 활용 가능성 탐색: 본 리스크 지수는 미래 주가 수익률과 안정적인 음의 상관관계를 보입니다. '주가 지수가 실물 경기를 선행한다'는 대전제 하에, 장기 시계열 리스크 지수에 적절한 평활(smoothing) 기법을 적용하여 경기 순환 국면을 판단하는 보조 지표로 활용할 수 있는지에 대한 후속 연구를 진행할 수 있습니다.
